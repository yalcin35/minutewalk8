{"version":3,"file":"D5suuuKE.js","sources":["../../../../../../node_modules/svelte/src/internal/client/dom/elements/bindings/props.js","../../../../../../node_modules/lucide-svelte/dist/icons/circle.svelte","../../../../../../src/lib/components/QuestionHistory.svelte","../../../../../../src/lib/components/AuditTimer.svelte"],"sourcesContent":["import { teardown } from '../../../reactivity/effects.js';\nimport { get_descriptor } from '../../../../shared/utils.js';\n\n/**\n * Makes an `export`ed (non-prop) variable available on the `$$props` object\n * so that consumers can do `bind:x` on the component.\n * @template V\n * @param {Record<string, unknown>} props\n * @param {string} prop\n * @param {V} value\n * @returns {void}\n */\nexport function bind_prop(props, prop, value) {\n\tvar desc = get_descriptor(props, prop);\n\n\tif (desc && desc.set) {\n\t\tprops[prop] = value;\n\t\tteardown(() => {\n\t\t\tprops[prop] = null;\n\t\t});\n\t}\n}\n","<script>/**\n * @license lucide-svelte v0.359.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\nimport Icon from '../Icon.svelte';\nconst iconNode = [[\"circle\", { \"cx\": \"12\", \"cy\": \"12\", \"r\": \"10\" }]];\n/**\n * @component @name Circle\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSIxMCIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/circle\n * @see https://lucide.dev/guide/packages/lucide-svelte - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {FunctionalComponent} Svelte component\n *\n */\n</script>\n\n<Icon name=\"circle\" {...$$props} iconNode={iconNode}>\n  <slot/>\n</Icon>\n","<script lang=\"ts\">\n  import { fade, slide } from 'svelte/transition';\n  import { \n    Star, \n    Calendar, \n    User, \n    Image as ImageIcon,\n    ChevronDown,\n    ChevronUp,\n    MessageSquare,\n    Brain\n  } from 'lucide-svelte';\n  import type { AIInsight } from '$lib/types/ai';\n\n  export let questionId: number;\n  export let previousAnswers: Array<{\n    rating: number;\n    photos: string[];\n    notes: string;\n    created_at: string;\n    aiInsight?: AIInsight;\n    user: {\n      full_name: string;\n      email: string;\n    };\n  }>;\n\n  let expanded = false;\n  let expandedPhotoUrl: string | null = null;\n\n  function formatDate(dateString: string): string {\n    return new Date(dateString).toLocaleDateString('en-US', {\n      year: 'numeric',\n      month: 'short',\n      day: 'numeric',\n      hour: '2-digit',\n      minute: '2-digit'\n    });\n  }\n\n  function getScoreColor(score: number): string {\n    if (score >= 4) return 'text-green-500';\n    if (score >= 3) return 'text-yellow-500';\n    return 'text-red-500';\n  }\n</script>\n\n{#if previousAnswers.length > 0}\n  <div class=\"mt-4\">\n    <button\n      class=\"w-full flex items-center justify-between p-4 bg-gray-50 rounded-xl\n             hover:bg-gray-100 transition-colors\"\n      on:click={() => expanded = !expanded}\n    >\n      <div class=\"flex items-center space-x-4\">\n        <div class=\"flex items-center space-x-1\">\n          <Star class=\"w-5 h-5 {getScoreColor(previousAnswers[0].rating)}\" />\n          <span class=\"text-2xl font-light {getScoreColor(previousAnswers[0].rating)}\">\n            {previousAnswers[0].rating}\n          </span>\n        </div>\n        \n        <div class=\"text-sm text-gray-500\">\n          Previous score from {previousAnswers[0].user.full_name}\n        </div>\n      </div>\n\n      <svelte:component \n        this={expanded ? ChevronUp : ChevronDown}\n        class=\"w-5 h-5 text-gray-400\"\n      />\n    </button>\n\n    {#if expanded}\n      <div \n        class=\"mt-4 space-y-6 bg-white rounded-xl p-6 shadow-sm\"\n        transition:slide\n      >\n        <!-- Latest Submission -->\n        <div class=\"space-y-6\">\n          {#if previousAnswers[0].photos.length > 0}\n            <div class=\"space-y-2\">\n              <label class=\"text-sm font-medium text-gray-700 flex items-center space-x-2\">\n                <ImageIcon class=\"w-4 h-4\" />\n                <span>Evidence Photos</span>\n              </label>\n              <div class=\"grid grid-cols-3 gap-2\">\n                {#each previousAnswers[0].photos as photo}\n                  <button\n                    class=\"aspect-square rounded-lg overflow-hidden bg-gray-100 relative\n                           hover:opacity-90 transition-opacity\"\n                    on:click={() => expandedPhotoUrl = photo}\n                  >\n                    <img\n                      src={photo}\n                      alt=\"Previous audit evidence\"\n                      class=\"w-full h-full object-cover\"\n                    />\n                  </button>\n                {/each}\n              </div>\n            </div>\n          {/if}\n\n          {#if previousAnswers[0].notes}\n            <div class=\"space-y-2\">\n              <label class=\"text-sm font-medium text-gray-700 flex items-center space-x-2\">\n                <MessageSquare class=\"w-4 h-4\" />\n                <span>Notes</span>\n              </label>\n              <p class=\"text-gray-600 text-sm\">\n                {previousAnswers[0].notes}\n              </p>\n            </div>\n          {/if}\n\n          {#if previousAnswers[0].aiInsight}\n            <div class=\"space-y-2\">\n              <label class=\"text-sm font-medium text-gray-700 flex items-center space-x-2\">\n                <Brain class=\"w-4 h-4\" />\n                <span>AI Review</span>\n              </label>\n              <div class=\"bg-purple-50 rounded-lg p-4 space-y-4\">\n                <p class=\"text-sm text-gray-600\">\n                  {previousAnswers[0].aiInsight.observation}\n                </p>\n                {#if previousAnswers[0].aiInsight.recommendations.length > 0}\n                  <div class=\"space-y-2\">\n                    <h4 class=\"text-sm font-medium text-gray-700\">Recommendations:</h4>\n                    <ul class=\"space-y-2\">\n                      {#each previousAnswers[0].aiInsight.recommendations as rec}\n                        <li class=\"text-sm text-gray-600\">\n                          {rec.text}\n                          <span class=\"ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium\n                            {rec.priority === 'High' ? 'bg-red-100 text-red-800' :\n                             rec.priority === 'Medium' ? 'bg-yellow-100 text-yellow-800' :\n                             'bg-green-100 text-green-800'}\">\n                            {rec.priority}\n                          </span>\n                        </li>\n                      {/each}\n                    </ul>\n                  </div>\n                {/if}\n              </div>\n            </div>\n          {/if}\n\n          <div class=\"flex items-center justify-between text-sm text-gray-500\">\n            <div class=\"flex items-center space-x-2\">\n              <Calendar class=\"w-4 h-4\" />\n              <span>{formatDate(previousAnswers[0].created_at)}</span>\n            </div>\n            <div class=\"flex items-center space-x-2\">\n              <User class=\"w-4 h-4\" />\n              <span>{previousAnswers[0].user.full_name}</span>\n            </div>\n          </div>\n        </div>\n\n        <!-- Previous Submissions -->\n        {#if previousAnswers.length > 1}\n          <div class=\"border-t border-gray-100 pt-6\">\n            <h4 class=\"text-sm font-medium text-gray-900 mb-4\">Previous Submissions</h4>\n            <div class=\"space-y-4\">\n              {#each previousAnswers.slice(1) as submission}\n                <div class=\"flex items-center justify-between py-2\">\n                  <div class=\"flex items-center space-x-4\">\n                    <div class=\"flex items-center space-x-1\">\n                      <Star class=\"w-4 h-4 {getScoreColor(submission.rating)}\" />\n                      <span class=\"font-medium {getScoreColor(submission.rating)}\">\n                        {submission.rating}\n                      </span>\n                    </div>\n                    <span class=\"text-sm text-gray-500\">\n                      by {submission.user.full_name}\n                    </span>\n                  </div>\n                  <span class=\"text-sm text-gray-500\">\n                    {formatDate(submission.created_at)}\n                  </span>\n                </div>\n              {/each}\n            </div>\n          </div>\n        {/if}\n      </div>\n    {/if}\n  </div>\n{/if}\n\n<!-- Photo Modal -->\n{#if expandedPhotoUrl}\n  <div\n    class=\"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50\"\n    on:click={() => expandedPhotoUrl = null}\n    transition:fade={{ duration: 200 }}\n  >\n    <img\n      src={expandedPhotoUrl}\n      alt=\"Expanded evidence\"\n      class=\"max-w-full max-h-full rounded-lg\"\n      on:click|stopPropagation\n    />\n  </div>\n{/if}","<script lang=\"ts\">\n  import { onMount, onDestroy } from 'svelte';\n  import { Clock } from 'lucide-svelte';\n\n  export let ref: any = null;\n  export let startTime: Date | null = null;\n  export let onTick: ((seconds: number) => void) | null = null;\n\n  let elapsedSeconds = 0;\n  let timerInterval: NodeJS.Timeout | null = null;\n\n  // Expose the stopTimer method to parent components\n  export function stopTimer(): number {\n    if (timerInterval) {\n      clearInterval(timerInterval);\n      timerInterval = null;\n    }\n    return elapsedSeconds;\n  }\n\n  function formatTime(seconds: number): string {\n    const hours = Math.floor(seconds / 3600);\n    const minutes = Math.floor((seconds % 3600) / 60);\n    const remainingSeconds = seconds % 60;\n\n    if (hours > 0) {\n      return `${hours}:${minutes.toString().padStart(2, '0')}:${remainingSeconds.toString().padStart(2, '0')}`;\n    }\n    return `${minutes}:${remainingSeconds.toString().padStart(2, '0')}`;\n  }\n\n  function startTimer() {\n    if (timerInterval) return;\n\n    // Calculate initial elapsed time if startTime is provided\n    if (startTime) {\n      elapsedSeconds = Math.floor((Date.now() - startTime.getTime()) / 1000);\n    }\n\n    timerInterval = setInterval(() => {\n      elapsedSeconds++;\n      if (onTick) onTick(elapsedSeconds);\n    }, 1000);\n  }\n\n  onMount(() => {\n    ref = { stopTimer };\n    startTimer();\n  });\n\n  onDestroy(() => {\n    stopTimer();\n  });\n</script>\n\n<div class=\"flex items-center space-x-2 text-gray-600\">\n  <Clock class=\"w-4 h-4\" />\n  <span class=\"font-mono\">{formatTime(elapsedSeconds)}</span>\n</div>"],"names":["prop","$.prop","$.mutable_source","$.derived_safe_equal","ChevronUp","ChevronDown","$$anchor","$.each","$.event","$.set","$.set_text","$.get","$.template_effect","$.transition","$.update"],"mappings":"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","x_google_ignoreList":[0,1]}