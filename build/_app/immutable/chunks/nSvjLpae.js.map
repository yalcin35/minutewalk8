{"version":3,"file":"nSvjLpae.js","sources":["../../../../../../node_modules/@sveltejs/kit/src/runtime/app/stores.js","../../../../../../node_modules/lucide-svelte/dist/icons/chevrons-left.svelte","../../../../../../node_modules/lucide-svelte/dist/icons/chevrons-right.svelte","../../../../../../node_modules/lucide-svelte/dist/icons/layout-dashboard.svelte","../../../../../../src/lib/components/Sidebar.svelte"],"sourcesContent":["import { getContext } from 'svelte';\nimport { BROWSER } from 'esm-env';\nimport { stores as browser_stores } from '../client/client.js';\n\n/**\n * A function that returns all of the contextual stores. On the server, this must be called during component initialization.\n * Only use this if you need to defer store subscription until after the component has mounted, for some reason.\n *\n * @deprecated Use `$app/state` instead (requires Svelte 5, [see docs for more info](https://svelte.dev/docs/kit/migrating-to-sveltekit-2#SvelteKit-2.12:-$app-stores-deprecated))\n */\nexport const getStores = () => {\n\tconst stores = BROWSER ? browser_stores : getContext('__svelte__');\n\n\treturn {\n\t\t/** @type {typeof page} */\n\t\tpage: {\n\t\t\tsubscribe: stores.page.subscribe\n\t\t},\n\t\t/** @type {typeof navigating} */\n\t\tnavigating: {\n\t\t\tsubscribe: stores.navigating.subscribe\n\t\t},\n\t\t/** @type {typeof updated} */\n\t\tupdated: stores.updated\n\t};\n};\n\n/**\n * A readable store whose value contains page data.\n *\n * On the server, this store can only be subscribed to during component initialization. In the browser, it can be subscribed to at any time.\n *\n * @deprecated Use `page` from `$app/state` instead (requires Svelte 5, [see docs for more info](https://svelte.dev/docs/kit/migrating-to-sveltekit-2#SvelteKit-2.12:-$app-stores-deprecated))\n * @type {import('svelte/store').Readable<import('@sveltejs/kit').Page>}\n */\nexport const page = {\n\tsubscribe(fn) {\n\t\tconst store = __SVELTEKIT_DEV__ ? get_store('page') : getStores().page;\n\t\treturn store.subscribe(fn);\n\t}\n};\n\n/**\n * A readable store.\n * When navigating starts, its value is a `Navigation` object with `from`, `to`, `type` and (if `type === 'popstate'`) `delta` properties.\n * When navigating finishes, its value reverts to `null`.\n *\n * On the server, this store can only be subscribed to during component initialization. In the browser, it can be subscribed to at any time.\n *\n * @deprecated Use `navigating` from `$app/state` instead (requires Svelte 5, [see docs for more info](https://svelte.dev/docs/kit/migrating-to-sveltekit-2#SvelteKit-2.12:-$app-stores-deprecated))\n * @type {import('svelte/store').Readable<import('@sveltejs/kit').Navigation | null>}\n */\nexport const navigating = {\n\tsubscribe(fn) {\n\t\tconst store = __SVELTEKIT_DEV__ ? get_store('navigating') : getStores().navigating;\n\t\treturn store.subscribe(fn);\n\t}\n};\n\n/**\n * A readable store whose initial value is `false`. If [`version.pollInterval`](https://svelte.dev/docs/kit/configuration#version) is a non-zero value, SvelteKit will poll for new versions of the app and update the store value to `true` when it detects one. `updated.check()` will force an immediate check, regardless of polling.\n *\n * On the server, this store can only be subscribed to during component initialization. In the browser, it can be subscribed to at any time.\n *\n * @deprecated Use `updated` from `$app/state` instead (requires Svelte 5, [see docs for more info](https://svelte.dev/docs/kit/migrating-to-sveltekit-2#SvelteKit-2.12:-$app-stores-deprecated))\n * @type {import('svelte/store').Readable<boolean> & { check(): Promise<boolean> }}\n */\nexport const updated = {\n\tsubscribe(fn) {\n\t\tconst store = __SVELTEKIT_DEV__ ? get_store('updated') : getStores().updated;\n\n\t\tif (BROWSER) {\n\t\t\tupdated.check = store.check;\n\t\t}\n\n\t\treturn store.subscribe(fn);\n\t},\n\tcheck: () => {\n\t\tthrow new Error(\n\t\t\tBROWSER\n\t\t\t\t? 'Cannot check updated store before subscribing'\n\t\t\t\t: 'Can only check updated store in browser'\n\t\t);\n\t}\n};\n\n/**\n * @template {keyof ReturnType<typeof getStores>} Name\n * @param {Name} name\n * @returns {ReturnType<typeof getStores>[Name]}\n */\nfunction get_store(name) {\n\ttry {\n\t\treturn getStores()[name];\n\t} catch {\n\t\tthrow new Error(\n\t\t\t`Cannot subscribe to '${name}' store on the server outside of a Svelte component, as it is bound to the current request via component context. This prevents state from leaking between users.` +\n\t\t\t\t'For more information, see https://svelte.dev/docs/kit/state-management#avoid-shared-state-on-the-server'\n\t\t);\n\t}\n}\n","<script>/**\n * @license lucide-svelte v0.359.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\nimport Icon from '../Icon.svelte';\nconst iconNode = [[\"path\", { \"d\": \"m11 17-5-5 5-5\" }], [\"path\", { \"d\": \"m18 17-5-5 5-5\" }]];\n/**\n * @component @name ChevronsLeft\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJtMTEgMTctNS01IDUtNSIgLz4KICA8cGF0aCBkPSJtMTggMTctNS01IDUtNSIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/chevrons-left\n * @see https://lucide.dev/guide/packages/lucide-svelte - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {FunctionalComponent} Svelte component\n *\n */\n</script>\n\n<Icon name=\"chevrons-left\" {...$$props} iconNode={iconNode}>\n  <slot/>\n</Icon>\n","<script>/**\n * @license lucide-svelte v0.359.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\nimport Icon from '../Icon.svelte';\nconst iconNode = [[\"path\", { \"d\": \"m6 17 5-5-5-5\" }], [\"path\", { \"d\": \"m13 17 5-5-5-5\" }]];\n/**\n * @component @name ChevronsRight\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJtNiAxNyA1LTUtNS01IiAvPgogIDxwYXRoIGQ9Im0xMyAxNyA1LTUtNS01IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/chevrons-right\n * @see https://lucide.dev/guide/packages/lucide-svelte - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {FunctionalComponent} Svelte component\n *\n */\n</script>\n\n<Icon name=\"chevrons-right\" {...$$props} iconNode={iconNode}>\n  <slot/>\n</Icon>\n","<script>/**\n * @license lucide-svelte v0.359.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\nimport Icon from '../Icon.svelte';\nconst iconNode = [[\"rect\", { \"width\": \"7\", \"height\": \"9\", \"x\": \"3\", \"y\": \"3\", \"rx\": \"1\" }], [\"rect\", { \"width\": \"7\", \"height\": \"5\", \"x\": \"14\", \"y\": \"3\", \"rx\": \"1\" }], [\"rect\", { \"width\": \"7\", \"height\": \"9\", \"x\": \"14\", \"y\": \"12\", \"rx\": \"1\" }], [\"rect\", { \"width\": \"7\", \"height\": \"5\", \"x\": \"3\", \"y\": \"16\", \"rx\": \"1\" }]];\n/**\n * @component @name LayoutDashboard\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cmVjdCB3aWR0aD0iNyIgaGVpZ2h0PSI5IiB4PSIzIiB5PSIzIiByeD0iMSIgLz4KICA8cmVjdCB3aWR0aD0iNyIgaGVpZ2h0PSI1IiB4PSIxNCIgeT0iMyIgcng9IjEiIC8+CiAgPHJlY3Qgd2lkdGg9IjciIGhlaWdodD0iOSIgeD0iMTQiIHk9IjEyIiByeD0iMSIgLz4KICA8cmVjdCB3aWR0aD0iNyIgaGVpZ2h0PSI1IiB4PSIzIiB5PSIxNiIgcng9IjEiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/layout-dashboard\n * @see https://lucide.dev/guide/packages/lucide-svelte - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {FunctionalComponent} Svelte component\n *\n */\n</script>\n\n<Icon name=\"layout-dashboard\" {...$$props} iconNode={iconNode}>\n  <slot/>\n</Icon>\n","<script lang=\"ts\">\n  import { page } from '$app/stores';\n  import { fade, fly } from 'svelte/transition';\n  import { _ } from 'svelte-i18n';\n  import { \n    Orbit,\n    LayoutDashboard, \n    ClipboardCheck, \n    Users,\n    Shield,\n    BadgeCheck,\n    DollarSign,\n    Truck,\n    Leaf,\n    Plus, \n    Settings, \n    LogOut, \n    ChevronsLeft, \n    ChevronsRight,\n    History\n  } from 'lucide-svelte';\n  import { supabase } from '$lib/supabase';\n  import { goto } from '$app/navigation';\n  import { onMount } from 'svelte';\n  import { clearSupabaseAuth } from '$lib/supabase';\n\n  export let isOpen = true;\n  let companyLogo: string | null = null;\n\n  const menuItems = [\n    { href: '/dashboard', labelKey: 'nav.dashboard', icon: LayoutDashboard },\n    { href: '/audit/setup', labelKey: 'nav.newWalk', icon: ClipboardCheck },\n    { href: '/checkin', labelKey: 'nav.sqcdpe', icon: Plus },\n    { href: '/history', labelKey: 'nav.viewHistory', icon: History },\n    { href: '/settings', labelKey: 'nav.settings', icon: Settings }\n  ];\n\n  async function handleLogout() {\n    const { error } = await supabase.auth.signOut();\n    if (error) {\n      console.error('Error signing out:', error);\n      return;\n    }\n    clearSupabaseAuth();\n    goto('/signin');\n  }\n\n  function toggleSidebar() {\n    isOpen = !isOpen;\n  }\n\n  function isActive(href: string): boolean {\n    return $page.url.pathname === href || \n           ($page.url.pathname.startsWith(href) && href !== '/');\n  }\n\n  onMount(async () => {\n    try {\n      // Fetch company logo\n      const { data: profile } = await supabase\n        .from('profiles')\n        .select('companies (logo_url)')\n        .eq('id', (await supabase.auth.getUser()).data.user?.id)\n        .single();\n\n      if (profile?.companies?.logo_url) {\n        companyLogo = profile.companies.logo_url;\n      }\n    } catch (error) {\n      console.error('Error loading company logo:', error);\n    }\n  });\n</script>\n\n<div \n  class={`h-screen fixed top-0 left-0 bg-white shadow-xl transition-all duration-300 z-40\n           ${isOpen ? 'w-64' : 'w-20'}`}\n>\n  <!-- Toggle Button -->\n  <button\n    class=\"absolute -right-3 top-20 w-6 h-12 bg-white rounded-r-lg shadow-md\n           flex items-center justify-center\"\n    on:click={toggleSidebar}\n  >\n    <svelte:component \n      this={isOpen ? ChevronsLeft : ChevronsRight}\n      class=\"w-4 h-4 text-gray-500\"\n    />\n  </button>\n\n  <!-- Brand -->\n  <div class=\"px-6 py-8 flex items-center space-x-3\">\n    <div class=\"w-10 h-10 rounded-full bg-blue-500 flex items-center justify-center text-white flex-shrink-0 overflow-hidden\">\n      {#if companyLogo}\n        <img src={companyLogo} alt=\"Company logo\" class=\"w-full h-full object-cover\" />\n      {:else}\n        <Orbit class=\"w-6 h-6\" />\n      {/if}\n    </div>\n    {#if isOpen}\n      <h1 class=\"text-xl font-bold text-gray-900\">MinuteWalk</h1>\n    {/if}\n  </div>\n\n  <!-- Navigation -->\n  <nav class=\"px-4 py-4\">\n    <ul class=\"space-y-2\">\n      {#each menuItems as item}\n        <li class=\"relative\">\n          <a\n            href={item.href}\n            class={`flex items-center space-x-3 px-4 py-3 rounded-xl transition-colors\n                   ${isActive(item.href) \n                     ? 'bg-blue-50 text-blue-600' \n                     : 'text-gray-600 hover:bg-gray-50 hover:text-gray-900'}`}\n          >\n            <svelte:component this={item.icon} class=\"w-5 h-5\" />\n            {#if isOpen}\n              <span>{$_(item.labelKey)}</span>\n              {#if item.labelKey === 'nav.sqcdpe'}\n                <div class=\"absolute right-2 top-1/2 -translate-y-1/2 flex space-x-1\">\n                  <div class=\"w-2 h-2 rounded-full bg-red-500\" title=\"Critical\"></div>\n                  <div class=\"w-2 h-2 rounded-full bg-yellow-500\" title=\"Needs Attention\"></div>\n                  <div class=\"w-2 h-2 rounded-full bg-green-500\" title=\"Good\"></div>\n                </div>\n              {/if}\n            {/if}\n          </a>\n        </li>\n      {/each}\n    </ul>\n  </nav>\n  \n  <!-- Logout at bottom -->\n  <div class=\"absolute bottom-8 left-0 right-0 px-4\">\n    <button\n      class={`w-full flex items-center space-x-3 px-4 py-3 rounded-xl\n             text-red-600 hover:bg-red-50 transition-colors`}\n      on:click={handleLogout}\n    >\n      <LogOut class=\"w-5 h-5\" />\n      {#if isOpen}\n        <span>{$_('common.logout')}</span>\n      {/if}\n    </button>\n  </div>\n</div>\n\n<!-- Backdrop for small screens -->\n{#if isOpen}\n  <div \n    class=\"lg:hidden fixed inset-0 bg-black/20 z-30\"\n    on:click={toggleSidebar}\n    transition:fade={{ duration: 200 }}\n  ></div>\n{/if}"],"names":["stores","browser_stores","$.prop","$.mutable_source","LayoutDashboard","ClipboardCheck","$.set","ChevronsLeft","ChevronsRight","$$anchor","$.each","$.component","$.get","$.derived_safe_equal","$.set_attribute","$.template_effect","$.set_text","$.transition"],"mappings":";;;;;;;;;;;;;;;;AAUO,MAAM,YAAY,MAAM;AAC9B,QAAMA,WAAmBC;AAElB,SAAA;AAAA;AAAA,IAEN,MAAM;AAAA,MACL,WAAWD,SAAO,KAAK;AAAA,IACxB;AAAA;AAAA,IAEA,YAAY;AAAA,MACX,WAAWA,SAAO,WAAW;AAAA,IAC9B;AAAA;AAAA,IAEA,SAASA,SAAO;AAAA,EACjB;AACD;AAUO,MAAM,OAAO;AAAA,EACnB,UAAU,IAAI;AACb,UAAM,QAAgD,YAAY;AAC3D,WAAA,MAAM,UAAU,EAAE;AAAA,EAAA;AAE3B;;;;;;;;QCjCM,WAAQ;AAAA,KAAK,QAAM,EAAI,KAAK,kBAAgB;AAAA,KAAM,QAAM,EAAI,KAAK,iBAAgB,CAAA;AAAA;;IAcrC;AAAA;;;;;;;;;;;;;;;;QCd5C,WAAQ;AAAA,KAAK,QAAM,EAAI,KAAK,iBAAe;AAAA,KAAM,QAAM,EAAI,KAAK,iBAAgB,CAAA;AAAA;;IAcnC;AAAA;;;;;;;;;;;;;;;;QCd7C,WAAQ;AAAA;MAAK;AAAA;QAAU,SAAS;AAAA,QAAK,UAAU;AAAA,QAAK,KAAK;AAAA,QAAK,KAAK;AAAA,QAAK,MAAM;AAAA;;;MAAS;AAAA;QAAU,SAAS;AAAA,QAAK,UAAU;AAAA,QAAK,KAAK;AAAA,QAAM,KAAK;AAAA,QAAK,MAAM;AAAA;;;MAAS;AAAA;QAAU,SAAS;AAAA,QAAK,UAAU;AAAA,QAAK,KAAK;AAAA,QAAM,KAAK;AAAA,QAAM,MAAM;AAAA;;;MAAS;AAAA;QAAU,SAAS;AAAA,QAAK,UAAU;AAAA,QAAK,KAAK;AAAA,QAAK,KAAK;AAAA,QAAM,MAAM;AAAA;;;;IAcjQ;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;MCKxC,SAASE,KAAA,SAAA,UAAA,IAAA,IAAA;MAChB,cAA6BC,eAAA,IAAA;AAE3B,QAAA,YAAA;AAAA;MACF,MAAM;AAAA,MAAc,UAAU;AAAA,MAAiB,MAAMC;AAAAA;;MACrD,MAAM;AAAA,MAAgB,UAAU;AAAA,MAAe,MAAMC;AAAAA;;MACrD,MAAM;AAAA,MAAY,UAAU;AAAA,MAAc,MAAM;AAAA;;MAChD,MAAM;AAAA,MAAY,UAAU;AAAA,MAAmB,MAAM;AAAA;;MACrD,MAAM;AAAA,MAAa,UAAU;AAAA,MAAgB,MAAM;AAAA;;iBAGxC,eAAe;AACpB,UAAA,EAAA,MAAA,IAAA,MAAgB,SAAS,KAAK,QAAA;QAClC,OAAO;AACT,cAAQ,MAAM,sBAAsB,KAAK;;IAE3C;AACA,sBAAA;AACA,SAAK,SAAS;AAAA,EAChB;WAES,gBAAgB;AACvB,WAAU,CAAA,QAAA;AAAA,EACZ;AAES,WAAA,SAAS,MAAuB;WAChC,MAAM,EAAA,IAAI,aAAa,QACtB,MAAA,EAAM,IAAI,SAAS,WAAW,IAAI,KAAK,SAAS;AAAA,EAC1D;AAEA,UAAoB,YAAA;;AACd,QAAA;AAEM,YAAA,EAAA,MAAM,kBAAkB,SAC7B,KAAK,UAAU,EACf,OAAO,sBAAsB,EAC7B,GAAG,OAAA,YAAa,SAAS,KAAK,WAAW,KAAK,SAA3C,mBAAiD,EAAE,EACtD,OAAA;AAEC,WAAA,wCAAS,cAAT,mBAAoB,UAAU;AAChCC,YAAA,aAAc,QAAQ,UAAU,QAAA;AAAA,MAClC;AAAA,IACF,SAAS,OAAO;AACd,cAAQ,MAAM,+BAA+B,KAAK;AAAA,IACpD;AAAA,GACD;;;;;;wBAcS,OAAM,IAAGC,gBAAeC,gBAAa,CAAAC,WAAA,gBAAA;;;;;;;;;;0DAS/B,WAAW,CAAA,CAAA;;;;;;;cADlB,WAAW,EAAA,UAAA,UAAA;AAAA,UAAA,UAAA,WAAA,KAAA;AAAA;;;;;;;;;;UAMb,OAAM,EAAA,UAAA,YAAA;AAAA;;;;;AAQFC,OAAA,IAAA,GAAA,MAAA,8BAAa,SAAI;;;;AASMC,cAAA,QAAA,MAAAC,IAAA,IAAI,EAAC,MAAI,CAAAH,WAAA,gBAAA;;;;;;;;;;;;;;;;;oBAG1B,IAAI,EAAC,aAAa,aAAY,UAAA,YAAA;AAAA;;2DAD5B,GAAE,EAAAG,IAAC,IAAI,EAAC,QAAQ,CAAA,GAAAC,kBAAA;;;;YADpB,OAAM,EAAA,UAAA,YAAA;AAAA;;;;;;AAPLC,sBAAA,GAAA,QAAAF,IAAA,IAAI,EAAC,IAAI;;;;;qBAEN,aAAS,IAAI,EAAC,IAAI,IAChB,6BACA,oDAAoD;AAAA;;;;;;;;;;;;;;;;;;;AA4B5DG,sBAAA,CAAA,OAAAC,SAAA,QAAA,EAAA,GAAA,CAAA,MAAA,KAAG,eAAe,CAAA,GAAAH,kBAAA;;;;UADtB,OAAM,EAAA,UAAA,YAAA;AAAA;;;;;;;;;4BAWH,aAAa;AACJI,iBAAA,GAAA,OAAA,MAAA,MAAA,OAAA,EAAA,UAAU,IAAG,EAAA;;;;UAJ/B,OAAM,EAAA,UAAA,YAAA;AAAA;;;aAzEE,OAAM,IAAG,SAAS,MAAM,EAAA,CAAA;yBAMvB,aAAa;2BAwDX,YAAY;;;;;","x_google_ignoreList":[0,1,2,3]}