{"version":3,"file":"hmB93t6v.js","sources":["../../../../../../node_modules/svelte/src/internal/client/dom/legacy/misc.js","../../../../../../node_modules/lucide-svelte/dist/icons/chevron-left.svelte","../../../../../../node_modules/lucide-svelte/dist/icons/chevron-right.svelte","../../../../../../node_modules/lucide-svelte/dist/icons/x.svelte","../../../../../../node_modules/svelte/src/motion/utils.js","../../../../../../node_modules/svelte/src/motion/spring.js","../../../../../../src/lib/components/PhotoUpload.svelte","../../../../../../src/lib/components/PhotoDisplay.svelte","../../../../../../src/lib/components/AIInsights.svelte","../../../../../../src/lib/services/ai.ts"],"sourcesContent":["import { set, source } from '../../reactivity/sources.js';\nimport { get } from '../../runtime.js';\nimport { is_array } from '../../../shared/utils.js';\n\n/**\n * Under some circumstances, imports may be reactive in legacy mode. In that case,\n * they should be using `reactive_import` as part of the transformation\n * @param {() => any} fn\n */\nexport function reactive_import(fn) {\n\tvar s = source(0);\n\n\treturn function () {\n\t\tif (arguments.length === 1) {\n\t\t\tset(s, get(s) + 1);\n\t\t\treturn arguments[0];\n\t\t} else {\n\t\t\tget(s);\n\t\t\treturn fn();\n\t\t}\n\t};\n}\n\n/**\n * @this {any}\n * @param {Record<string, unknown>} $$props\n * @param {Event} event\n * @returns {void}\n */\nexport function bubble_event($$props, event) {\n\tvar events = /** @type {Record<string, Function[] | Function>} */ ($$props.$$events)?.[\n\t\tevent.type\n\t];\n\n\tvar callbacks = is_array(events) ? events.slice() : events == null ? [] : [events];\n\n\tfor (var fn of callbacks) {\n\t\t// Preserve \"this\" context\n\t\tfn.call(this, event);\n\t}\n}\n\n/**\n * Used to simulate `$on` on a component instance when `compatibility.componentApi === 4`\n * @param {Record<string, any>} $$props\n * @param {string} event_name\n * @param {Function} event_callback\n */\nexport function add_legacy_event_listener($$props, event_name, event_callback) {\n\t$$props.$$events ||= {};\n\t$$props.$$events[event_name] ||= [];\n\t$$props.$$events[event_name].push(event_callback);\n}\n\n/**\n * Used to simulate `$set` on a component instance when `compatibility.componentApi === 4`.\n * Needs component accessors so that it can call the setter of the prop. Therefore doesn't\n * work for updating props in `$$props` or `$$restProps`.\n * @this {Record<string, any>}\n * @param {Record<string, any>} $$new_props\n */\nexport function update_legacy_props($$new_props) {\n\tfor (var key in $$new_props) {\n\t\tif (key in this) {\n\t\t\tthis[key] = $$new_props[key];\n\t\t}\n\t}\n}\n","<script>/**\n * @license lucide-svelte v0.359.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\nimport Icon from '../Icon.svelte';\nconst iconNode = [[\"path\", { \"d\": \"m15 18-6-6 6-6\" }]];\n/**\n * @component @name ChevronLeft\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJtMTUgMTgtNi02IDYtNiIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/chevron-left\n * @see https://lucide.dev/guide/packages/lucide-svelte - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {FunctionalComponent} Svelte component\n *\n */\n</script>\n\n<Icon name=\"chevron-left\" {...$$props} iconNode={iconNode}>\n  <slot/>\n</Icon>\n","<script>/**\n * @license lucide-svelte v0.359.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\nimport Icon from '../Icon.svelte';\nconst iconNode = [[\"path\", { \"d\": \"m9 18 6-6-6-6\" }]];\n/**\n * @component @name ChevronRight\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJtOSAxOCA2LTYtNi02IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/chevron-right\n * @see https://lucide.dev/guide/packages/lucide-svelte - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {FunctionalComponent} Svelte component\n *\n */\n</script>\n\n<Icon name=\"chevron-right\" {...$$props} iconNode={iconNode}>\n  <slot/>\n</Icon>\n","<script>/**\n * @license lucide-svelte v0.359.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\nimport Icon from '../Icon.svelte';\nconst iconNode = [[\"path\", { \"d\": \"M18 6 6 18\" }], [\"path\", { \"d\": \"m6 6 12 12\" }]];\n/**\n * @component @name X\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTggNiA2IDE4IiAvPgogIDxwYXRoIGQ9Im02IDYgMTIgMTIiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/x\n * @see https://lucide.dev/guide/packages/lucide-svelte - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {FunctionalComponent} Svelte component\n *\n */\n</script>\n\n<Icon name=\"x\" {...$$props} iconNode={iconNode}>\n  <slot/>\n</Icon>\n","/**\n * @param {any} obj\n * @returns {obj is Date}\n */\nexport function is_date(obj) {\n\treturn Object.prototype.toString.call(obj) === '[object Date]';\n}\n","/** @import { Task } from '#client' */\n/** @import { SpringOpts, SpringUpdateOpts, TickContext } from './private.js' */\n/** @import { Spring as SpringStore } from './public.js' */\nimport { writable } from '../store/shared/index.js';\nimport { loop } from '../internal/client/loop.js';\nimport { raf } from '../internal/client/timing.js';\nimport { is_date } from './utils.js';\nimport { set, source } from '../internal/client/reactivity/sources.js';\nimport { render_effect } from '../internal/client/reactivity/effects.js';\nimport { get } from '../internal/client/runtime.js';\nimport { deferred, noop } from '../internal/shared/utils.js';\n\n/**\n * @template T\n * @param {TickContext} ctx\n * @param {T} last_value\n * @param {T} current_value\n * @param {T} target_value\n * @returns {T}\n */\nfunction tick_spring(ctx, last_value, current_value, target_value) {\n\tif (typeof current_value === 'number' || is_date(current_value)) {\n\t\t// @ts-ignore\n\t\tconst delta = target_value - current_value;\n\t\t// @ts-ignore\n\t\tconst velocity = (current_value - last_value) / (ctx.dt || 1 / 60); // guard div by 0\n\t\tconst spring = ctx.opts.stiffness * delta;\n\t\tconst damper = ctx.opts.damping * velocity;\n\t\tconst acceleration = (spring - damper) * ctx.inv_mass;\n\t\tconst d = (velocity + acceleration) * ctx.dt;\n\t\tif (Math.abs(d) < ctx.opts.precision && Math.abs(delta) < ctx.opts.precision) {\n\t\t\treturn target_value; // settled\n\t\t} else {\n\t\t\tctx.settled = false; // signal loop to keep ticking\n\t\t\t// @ts-ignore\n\t\t\treturn is_date(current_value) ? new Date(current_value.getTime() + d) : current_value + d;\n\t\t}\n\t} else if (Array.isArray(current_value)) {\n\t\t// @ts-ignore\n\t\treturn current_value.map((_, i) =>\n\t\t\t// @ts-ignore\n\t\t\ttick_spring(ctx, last_value[i], current_value[i], target_value[i])\n\t\t);\n\t} else if (typeof current_value === 'object') {\n\t\tconst next_value = {};\n\t\tfor (const k in current_value) {\n\t\t\t// @ts-ignore\n\t\t\tnext_value[k] = tick_spring(ctx, last_value[k], current_value[k], target_value[k]);\n\t\t}\n\t\t// @ts-ignore\n\t\treturn next_value;\n\t} else {\n\t\tthrow new Error(`Cannot spring ${typeof current_value} values`);\n\t}\n}\n\n/**\n * The spring function in Svelte creates a store whose value is animated, with a motion that simulates the behavior of a spring. This means when the value changes, instead of transitioning at a steady rate, it \"bounces\" like a spring would, depending on the physics parameters provided. This adds a level of realism to the transitions and can enhance the user experience.\n *\n * @deprecated Use [`Spring`](https://svelte.dev/docs/svelte/svelte-motion#Spring) instead\n * @template [T=any]\n * @param {T} [value]\n * @param {SpringOpts} [opts]\n * @returns {SpringStore<T>}\n */\nexport function spring(value, opts = {}) {\n\tconst store = writable(value);\n\tconst { stiffness = 0.15, damping = 0.8, precision = 0.01 } = opts;\n\t/** @type {number} */\n\tlet last_time;\n\t/** @type {Task | null} */\n\tlet task;\n\t/** @type {object} */\n\tlet current_token;\n\n\tlet last_value = /** @type {T} */ (value);\n\tlet target_value = /** @type {T | undefined} */ (value);\n\n\tlet inv_mass = 1;\n\tlet inv_mass_recovery_rate = 0;\n\tlet cancel_task = false;\n\t/**\n\t * @param {T} new_value\n\t * @param {SpringUpdateOpts} opts\n\t * @returns {Promise<void>}\n\t */\n\tfunction set(new_value, opts = {}) {\n\t\ttarget_value = new_value;\n\t\tconst token = (current_token = {});\n\t\tif (value == null || opts.hard || (spring.stiffness >= 1 && spring.damping >= 1)) {\n\t\t\tcancel_task = true; // cancel any running animation\n\t\t\tlast_time = raf.now();\n\t\t\tlast_value = new_value;\n\t\t\tstore.set((value = target_value));\n\t\t\treturn Promise.resolve();\n\t\t} else if (opts.soft) {\n\t\t\tconst rate = opts.soft === true ? 0.5 : +opts.soft;\n\t\t\tinv_mass_recovery_rate = 1 / (rate * 60);\n\t\t\tinv_mass = 0; // infinite mass, unaffected by spring forces\n\t\t}\n\t\tif (!task) {\n\t\t\tlast_time = raf.now();\n\t\t\tcancel_task = false;\n\t\t\ttask = loop((now) => {\n\t\t\t\tif (cancel_task) {\n\t\t\t\t\tcancel_task = false;\n\t\t\t\t\ttask = null;\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tinv_mass = Math.min(inv_mass + inv_mass_recovery_rate, 1);\n\n\t\t\t\t// clamp elapsed time to 1/30th of a second, so that longer pauses\n\t\t\t\t// (blocked thread or inactive tab) don't cause the spring to go haywire\n\t\t\t\tconst elapsed = Math.min(now - last_time, 1000 / 30);\n\n\t\t\t\t/** @type {TickContext} */\n\t\t\t\tconst ctx = {\n\t\t\t\t\tinv_mass,\n\t\t\t\t\topts: spring,\n\t\t\t\t\tsettled: true,\n\t\t\t\t\tdt: (elapsed * 60) / 1000\n\t\t\t\t};\n\t\t\t\t// @ts-ignore\n\t\t\t\tconst next_value = tick_spring(ctx, last_value, value, target_value);\n\t\t\t\tlast_time = now;\n\t\t\t\tlast_value = /** @type {T} */ (value);\n\t\t\t\tstore.set((value = /** @type {T} */ (next_value)));\n\t\t\t\tif (ctx.settled) {\n\t\t\t\t\ttask = null;\n\t\t\t\t}\n\t\t\t\treturn !ctx.settled;\n\t\t\t});\n\t\t}\n\t\treturn new Promise((fulfil) => {\n\t\t\t/** @type {Task} */ (task).promise.then(() => {\n\t\t\t\tif (token === current_token) fulfil();\n\t\t\t});\n\t\t});\n\t}\n\t/** @type {SpringStore<T>} */\n\t// @ts-expect-error - class-only properties are missing\n\tconst spring = {\n\t\tset,\n\t\tupdate: (fn, opts) => set(fn(/** @type {T} */ (target_value), /** @type {T} */ (value)), opts),\n\t\tsubscribe: store.subscribe,\n\t\tstiffness,\n\t\tdamping,\n\t\tprecision\n\t};\n\treturn spring;\n}\n\n/**\n * A wrapper for a value that behaves in a spring-like fashion. Changes to `spring.target` will cause `spring.current` to\n * move towards it over time, taking account of the `spring.stiffness` and `spring.damping` parameters.\n *\n * ```svelte\n * <script>\n * \timport { Spring } from 'svelte/motion';\n *\n * \tconst spring = new Spring(0);\n * </script>\n *\n * <input type=\"range\" bind:value={spring.target} />\n * <input type=\"range\" bind:value={spring.current} disabled />\n * ```\n * @template T\n * @since 5.8.0\n */\nexport class Spring {\n\t#stiffness = source(0.15);\n\t#damping = source(0.8);\n\t#precision = source(0.01);\n\n\t#current = source(/** @type {T} */ (undefined));\n\t#target = source(/** @type {T} */ (undefined));\n\n\t#last_value = /** @type {T} */ (undefined);\n\t#last_time = 0;\n\n\t#inverse_mass = 1;\n\t#momentum = 0;\n\n\t/** @type {import('../internal/client/types').Task | null} */\n\t#task = null;\n\n\t/** @type {ReturnType<typeof deferred> | null} */\n\t#deferred = null;\n\n\t/**\n\t * @param {T} value\n\t * @param {SpringOpts} [options]\n\t */\n\tconstructor(value, options = {}) {\n\t\tthis.#current.v = this.#target.v = value;\n\n\t\tif (typeof options.stiffness === 'number') this.#stiffness.v = clamp(options.stiffness, 0, 1);\n\t\tif (typeof options.damping === 'number') this.#damping.v = clamp(options.damping, 0, 1);\n\t\tif (typeof options.precision === 'number') this.#precision.v = options.precision;\n\t}\n\n\t/**\n\t * Create a spring whose value is bound to the return value of `fn`. This must be called\n\t * inside an effect root (for example, during component initialisation).\n\t *\n\t * ```svelte\n\t * <script>\n\t * \timport { Spring } from 'svelte/motion';\n\t *\n\t * \tlet { number } = $props();\n\t *\n\t * \tconst spring = Spring.of(() => number);\n\t * </script>\n\t * ```\n\t * @template U\n\t * @param {() => U} fn\n\t * @param {SpringOpts} [options]\n\t */\n\tstatic of(fn, options) {\n\t\tconst spring = new Spring(fn(), options);\n\n\t\trender_effect(() => {\n\t\t\tspring.set(fn());\n\t\t});\n\n\t\treturn spring;\n\t}\n\n\t/** @param {T} value */\n\t#update(value) {\n\t\tset(this.#target, value);\n\n\t\tthis.#current.v ??= value;\n\t\tthis.#last_value ??= this.#current.v;\n\n\t\tif (!this.#task) {\n\t\t\tthis.#last_time = raf.now();\n\n\t\t\tvar inv_mass_recovery_rate = 1000 / (this.#momentum * 60);\n\n\t\t\tthis.#task ??= loop((now) => {\n\t\t\t\tthis.#inverse_mass = Math.min(this.#inverse_mass + inv_mass_recovery_rate, 1);\n\n\t\t\t\t// clamp elapsed time to 1/30th of a second, so that longer pauses\n\t\t\t\t// (blocked thread or inactive tab) don't cause the spring to go haywire\n\t\t\t\tconst elapsed = Math.min(now - this.#last_time, 1000 / 30);\n\n\t\t\t\t/** @type {import('./private').TickContext} */\n\t\t\t\tconst ctx = {\n\t\t\t\t\tinv_mass: this.#inverse_mass,\n\t\t\t\t\topts: {\n\t\t\t\t\t\tstiffness: this.#stiffness.v,\n\t\t\t\t\t\tdamping: this.#damping.v,\n\t\t\t\t\t\tprecision: this.#precision.v\n\t\t\t\t\t},\n\t\t\t\t\tsettled: true,\n\t\t\t\t\tdt: (elapsed * 60) / 1000\n\t\t\t\t};\n\n\t\t\t\tvar next = tick_spring(ctx, this.#last_value, this.#current.v, this.#target.v);\n\t\t\t\tthis.#last_value = this.#current.v;\n\t\t\t\tthis.#last_time = now;\n\t\t\t\tset(this.#current, next);\n\n\t\t\t\tif (ctx.settled) {\n\t\t\t\t\tthis.#task = null;\n\t\t\t\t}\n\n\t\t\t\treturn !ctx.settled;\n\t\t\t});\n\t\t}\n\n\t\treturn this.#task.promise;\n\t}\n\n\t/**\n\t * Sets `spring.target` to `value` and returns a `Promise` that resolves if and when `spring.current` catches up to it.\n\t *\n\t * If `options.instant` is `true`, `spring.current` immediately matches `spring.target`.\n\t *\n\t * If `options.preserveMomentum` is provided, the spring will continue on its current trajectory for\n\t * the specified number of milliseconds. This is useful for things like 'fling' gestures.\n\t *\n\t * @param {T} value\n\t * @param {SpringUpdateOpts} [options]\n\t */\n\tset(value, options) {\n\t\tthis.#deferred?.reject(new Error('Aborted'));\n\n\t\tif (options?.instant || this.#current.v === undefined) {\n\t\t\tthis.#task?.abort();\n\t\t\tthis.#task = null;\n\t\t\tset(this.#current, set(this.#target, value));\n\t\t\tthis.#last_value = value;\n\t\t\treturn Promise.resolve();\n\t\t}\n\n\t\tif (options?.preserveMomentum) {\n\t\t\tthis.#inverse_mass = 0;\n\t\t\tthis.#momentum = options.preserveMomentum;\n\t\t}\n\n\t\tvar d = (this.#deferred = deferred());\n\t\td.promise.catch(noop);\n\n\t\tthis.#update(value).then(() => {\n\t\t\tif (d !== this.#deferred) return;\n\t\t\td.resolve(undefined);\n\t\t});\n\n\t\treturn d.promise;\n\t}\n\n\tget current() {\n\t\treturn get(this.#current);\n\t}\n\n\tget damping() {\n\t\treturn get(this.#damping);\n\t}\n\n\tset damping(v) {\n\t\tset(this.#damping, clamp(v, 0, 1));\n\t}\n\n\tget precision() {\n\t\treturn get(this.#precision);\n\t}\n\n\tset precision(v) {\n\t\tset(this.#precision, v);\n\t}\n\n\tget stiffness() {\n\t\treturn get(this.#stiffness);\n\t}\n\n\tset stiffness(v) {\n\t\tset(this.#stiffness, clamp(v, 0, 1));\n\t}\n\n\tget target() {\n\t\treturn get(this.#target);\n\t}\n\n\tset target(v) {\n\t\tthis.set(v);\n\t}\n}\n\n/**\n * @param {number} n\n * @param {number} min\n * @param {number} max\n */\nfunction clamp(n, min, max) {\n\treturn Math.max(min, Math.min(max, n));\n}\n","<script lang=\"ts\">\n  import { createEventDispatcher } from 'svelte';\n  import { Camera, Image as ImageIcon, Upload } from 'lucide-svelte';\n  \n  interface Photo {\n    id: string;\n    file: File;\n    thumbnail: string;\n  }\n\n  export let maxPhotos = 1; // Changed to 1 to restrict to single photo\n  export let maxSizeInMB = 1;\n  export let quality = 0.8;\n  export let minWidth = 1280;\n  export let minHeight = 720;\n  export let photos: Photo[] = [];\n\n  let showOptions = false;\n  let fileInput: HTMLInputElement;\n  let processing = false;\n\n  const dispatch = createEventDispatcher<{\n    change: { photos: Photo[] };\n    error: { message: string };\n  }>();\n\n  function generateId(): string {\n    return Math.random().toString(36).substring(2) + Date.now().toString(36);\n  }\n\n  async function compressImage(file: File): Promise<Blob> {\n    // Validate file type\n    if (!file.type.match(/^image\\/(jpeg|png|webp|heic)$/i)) {\n      throw new Error('Only image files (JPEG, PNG, WebP, HEIC) are allowed');\n    }\n\n    const img = new Image();\n    const canvas = document.createElement('canvas');\n    const ctx = canvas.getContext('2d')!;\n\n    const url = URL.createObjectURL(file);\n    \n    await new Promise((resolve) => {\n      img.onload = resolve;\n      img.src = url;\n    });\n\n    let width = img.width;\n    let height = img.height;\n    \n    if (width < minWidth || height < minHeight) {\n      const ratio = Math.max(minWidth / width, minHeight / height);\n      width *= ratio;\n      height *= ratio;\n    }\n\n    canvas.width = width;\n    canvas.height = height;\n    ctx.drawImage(img, 0, 0, width, height);\n    URL.revokeObjectURL(url);\n\n    return new Promise((resolve) => {\n      canvas.toBlob(\n        (blob) => resolve(blob!),\n        'image/jpeg',\n        quality\n      );\n    });\n  }\n\n  async function handleFiles(files: FileList) {\n    if (photos.length + files.length > maxPhotos) {\n      dispatch('error', { \n        message: `Maximum ${maxPhotos} photo allowed` \n      });\n      return;\n    }\n\n    processing = true;\n    const newPhotos: Photo[] = [];\n    \n    for (const file of files) {\n      try {\n        // Validate file type\n        if (!file.type.startsWith('image/')) {\n          dispatch('error', { \n            message: 'Only image files are allowed' \n          });\n          continue;\n        }\n\n        // Validate file size\n        if (file.size > maxSizeInMB * 1024 * 1024) {\n          dispatch('error', { \n            message: `File size must be less than ${maxSizeInMB}MB` \n          });\n          continue;\n        }\n\n        const compressed = await compressImage(file);\n        const compressedFile = new File(\n          [compressed], \n          file.name, \n          { type: 'image/jpeg' }\n        );\n\n        const photo: Photo = {\n          id: generateId(),\n          file: compressedFile,\n          thumbnail: URL.createObjectURL(compressed)\n        };\n\n        newPhotos.push(photo);\n      } catch (error) {\n        dispatch('error', { \n          message: error instanceof Error ? error.message : 'Failed to process image'\n        });\n      }\n    }\n\n    processing = false;\n    photos = [...photos, ...newPhotos];\n    dispatch('change', { photos });\n  }\n\n  function openCamera() {\n    showOptions = false;\n    const input = document.createElement('input');\n    input.type = 'file';\n    input.accept = 'image/*';\n    input.capture = 'environment';\n    input.onchange = (e) => {\n      const files = (e.target as HTMLInputElement).files;\n      if (files) handleFiles(files);\n    };\n    input.click();\n  }\n\n  function openPhotoLibrary() {\n    showOptions = false;\n    fileInput.click();\n  }\n\n  import { onDestroy } from 'svelte';\n  onDestroy(() => {\n    photos.forEach(photo => {\n      URL.revokeObjectURL(photo.thumbnail);\n    });\n  });\n</script>\n\n<!-- Photo Selection Options Modal -->\n{#if showOptions}\n  <div\n    class=\"fixed inset-0 bg-black/50 z-50 flex items-end sm:items-center justify-center p-4\"\n    on:click={() => showOptions = false}\n  >\n    <div\n      class=\"bg-white rounded-2xl w-full max-w-xs p-4 space-y-4\"\n      on:click|stopPropagation\n    >\n      <button\n        class=\"w-full p-4 flex items-center space-x-3 text-gray-700 hover:bg-gray-50 \n               rounded-xl transition-colors\"\n        on:click={openCamera}\n      >\n        <Camera class=\"w-6 h-6\" />\n        <span>Take Photo</span>\n      </button>\n      \n      <button\n        class=\"w-full p-4 flex items-center space-x-3 text-gray-700 hover:bg-gray-50 \n               rounded-xl transition-colors\"\n        on:click={openPhotoLibrary}\n      >\n        <ImageIcon class=\"w-6 h-6\" />\n        <span>Choose from Library</span>\n      </button>\n      \n      <button\n        class=\"w-full p-4 text-gray-500 hover:bg-gray-50 rounded-xl transition-colors\"\n        on:click={() => showOptions = false}\n      >\n        Cancel\n      </button>\n    </div>\n  </div>\n{/if}\n\n<!-- Hidden File Input -->\n<input\n  type=\"file\"\n  accept=\"image/*\"\n  class=\"hidden\"\n  bind:this={fileInput}\n  on:change={(e) => handleFiles(e.target.files)}\n/>\n\n<!-- Add Photo Button -->\n{#if photos.length < maxPhotos}\n  <button\n    class=\"w-full flex items-center justify-center space-x-2 p-4\n           bg-blue-50 hover:bg-blue-100 text-blue-600\n           rounded-xl transition-colors relative\n           disabled:opacity-50 disabled:cursor-not-allowed\"\n    on:click={() => showOptions = true}\n    disabled={processing}\n  >\n    <Camera class=\"w-5 h-5\" />\n    <span class=\"text-sm font-medium\">\n      {photos.length === 0 ? 'Add Photo' : `Replace Photo`}\n    </span>\n  </button>\n{/if}","<script lang=\"ts\">\n  import { X } from 'lucide-svelte';\n  import { scale } from 'svelte/transition';\n  \n  export let photos: Array<{\n    id: string;\n    thumbnail: string;\n  }> = [];\n  export let onRemove: (id: string) => void;\n</script>\n\n{#if photos.length > 0}\n  <div class=\"grid grid-cols-3 gap-2\">\n    {#each photos as photo (photo.id)}\n      <div\n        class=\"relative aspect-square rounded-lg overflow-hidden bg-gray-100\"\n        transition:scale={{ duration: 200 }}\n      >\n        <img\n          src={photo.thumbnail}\n          alt=\"Audit evidence\"\n          class=\"w-full h-full object-cover\"\n        />\n        \n        <button\n          class=\"absolute top-1 right-1 w-6 h-6 bg-black/50 rounded-full\n                 flex items-center justify-center text-white\n                 hover:bg-black/75 transition-colors\"\n          on:click={() => onRemove(photo.id)}\n        >\n          <X class=\"w-4 h-4\" />\n        </button>\n      </div>\n    {/each}\n  </div>\n{/if}","<script lang=\"ts\">\n  import { Brain, TriangleAlert as AlertTriangle, ChevronDown, ChevronUp } from 'lucide-svelte';\n  import { slide } from 'svelte/transition';\n  import { _ } from 'svelte-i18n';\n  import type { AIInsight } from '$lib/services/ai';\n  \n  export let insight: AIInsight | null = null;\n  export let loading = false;\n  export let error: string | null = null;\n  \n  let expanded = false;\n</script>\n\n<div class=\"bg-white/50 backdrop-blur-sm rounded-xl p-6 space-y-4\">\n  <div class=\"flex items-center justify-between\">\n    <div class=\"flex items-center space-x-3\">\n      <div class=\"w-10 h-10 rounded-full bg-purple-100 flex items-center justify-center\">\n        <Brain class=\"w-5 h-5 text-purple-600\" />\n      </div>\n      <div>\n        <h3 class=\"text-lg font-medium text-gray-900\">{$_('checkin.aiInsights')}</h3>\n        <p class=\"text-sm text-gray-500\">{$_('checkin.aiAnalysis')}</p>\n      </div>\n    </div>\n    \n    {#if insight}\n      <button\n        class=\"text-gray-400 hover:text-gray-600 transition-colors\"\n        on:click={() => expanded = !expanded}\n      >\n        {#if expanded}\n          <ChevronUp class=\"w-5 h-5\" />\n        {:else}\n          <ChevronDown class=\"w-5 h-5\" />\n        {/if}\n      </button>\n    {/if}\n  </div>\n\n  {#if loading}\n    <div class=\"flex items-center justify-center py-8\">\n      <div class=\"animate-pulse flex items-center space-x-2 text-purple-600\">\n        <Brain class=\"w-5 h-5\" />\n        <span>{$_('checkin.analyzing')}</span>\n      </div>\n    </div>\n  {:else if error}\n    <div class=\"bg-red-50 rounded-lg p-4 flex items-start space-x-3\">\n      <AlertTriangle class=\"w-5 h-5 text-red-500 flex-shrink-0 mt-0.5\" />\n      <p class=\"text-sm text-red-600\">{error}</p>\n    </div>\n  {:else if insight && expanded}\n    <div transition:slide class=\"space-y-6\">\n      <!-- Observation -->\n      <div>\n        <h4 class=\"text-sm font-medium text-gray-700 mb-2\">{$_('audit.observation')}</h4>\n        <p class=\"text-gray-600\">{insight.observation}</p>\n      </div>\n\n      <!-- Analysis -->\n      <div>\n        <h4 class=\"text-sm font-medium text-gray-700 mb-2\">{$_('audit.analysis')}</h4>\n        <p class=\"text-gray-600\">{insight.analysis}</p>\n      </div>\n\n      <!-- Recommendations -->\n      <div>\n        <h4 class=\"text-sm font-medium text-gray-700 mb-2\">{$_('audit.recommendations')}</h4>\n        <div class=\"space-y-3\">\n          {#each insight.recommendations as rec}\n            <div class=\"flex items-start space-x-3 bg-white rounded-lg p-4\">\n              <div class=\"flex-1\">\n                <p class=\"text-gray-700\">{rec.text}</p>\n                <div class=\"mt-2 flex items-center space-x-4 text-sm\">\n                  <span class=\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium\n                    {rec.priority === 'High' ? 'bg-red-100 text-red-800' :\n                     rec.priority === 'Medium' ? 'bg-yellow-100 text-yellow-800' :\n                     'bg-green-100 text-green-800'}\">\n                    {rec.priority} Priority\n                  </span>\n                  <span class=\"text-gray-500\">Impact: {rec.impact}</span>\n                </div>\n              </div>\n            </div>\n          {/each}\n        </div>\n      </div>\n\n      <!-- Follow-up Questions -->\n      <div>\n        <h4 class=\"text-sm font-medium text-gray-700 mb-2\">{$_('audit.followUpQuestions')}</h4>\n        <ul class=\"list-disc list-inside space-y-2 text-gray-600\">\n          {#each insight.followUp as question}\n            <li>{question}</li>\n          {/each}\n        </ul>\n      </div>\n    </div>\n  {:else if insight}\n    <p class=\"text-sm text-gray-500\">{$_('audit.clickToExpandAnalysis')}</p>\n  {/if}\n</div>","import type { AIInsight } from '$lib/types/ai';\nimport { locale } from '$lib/i18n';\nimport { get } from 'svelte/store';\n\nasync function fileToBase64(file: File): Promise<string> {\n  return new Promise((resolve, reject) => {\n    if (!(file instanceof Blob)) {\n      reject(new Error('Invalid file object'));\n      return;\n    }\n\n    const reader = new FileReader();\n    reader.onload = () => {\n      if (typeof reader.result === 'string') {\n        resolve(reader.result);\n      } else {\n        reject(new Error('Failed to convert file to base64'));\n      }\n    };\n    reader.onerror = error => reject(error);\n    reader.readAsDataURL(file);\n  });\n}\n\nexport async function getAIInsights(\n  question: string,\n  rating: number,\n  notes: string,\n  photos: File[],\n  auditType: string = '5s'\n): Promise<AIInsight> {\n  try {\n    // Validate inputs\n    if (!Array.isArray(photos)) {\n      throw new Error('Photos must be an array');\n    }\n\n    // Filter out invalid files and convert valid ones to base64\n    const validPhotos = photos.filter(file => file instanceof File && file.type.startsWith('image/'));\n    const photoBase64Promises = validPhotos.map(fileToBase64);\n    const photoBase64Data = await Promise.all(photoBase64Promises);\n\n    // Determine which endpoint to use based on audit type\n    let endpoint = '/audit/api/insights';\n    \n    // Get the current locale\n    const currentLocale = get(locale);\n    \n    if (auditType === 'hse') {\n      endpoint = '/audit/api/hse-insights';\n    } else if (auditType === 'mhe') {\n      endpoint = '/audit/api/mhe-insights';\n    } else if (auditType === 'gemba') {\n      endpoint = '/audit/api/gemba-insights';\n    }\n\n    const response = await fetch(endpoint, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json', \n        'Accept-Language': currentLocale || 'en',\n        'Cookie': `language=${currentLocale || 'en'}`\n      },\n      body: JSON.stringify({\n        question,\n        rating,\n        notes,\n        photos: photoBase64Data\n      })\n    });\n\n    if (!response.ok) {\n      throw new Error(`Failed to get AI insights (${response.status})`);\n    }\n\n    const data = await response.json();\n    if (data.error) {\n      throw new Error(data.error);\n    }\n\n    return data;\n  } catch (error) {\n    console.error('AI Analysis Error:', error);\n    throw error instanceof Error ? error : new Error('Failed to get AI insights');\n  }\n}"],"names":["event","spring","set","opts","$.prop","$.mutable_source","$.event","$.set","$.bind_this","$.set_text","$.each","$.template_effect","$.set_attribute","$.get","$.transition","$.derived_safe_equal","$.index","$$anchor","get","locale"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5]}