{"version":3,"file":"15.CLy1ae3V.js","sources":["../../../../../../node_modules/lucide-svelte/dist/icons/file.svelte","../../../../../../node_modules/lucide-svelte/dist/icons/filter.svelte","../../../../../../node_modules/lucide-svelte/dist/icons/search.svelte","../../../../../../src/routes/history/+page.svelte"],"sourcesContent":["<script>/**\n * @license lucide-svelte v0.359.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\nimport Icon from '../Icon.svelte';\nconst iconNode = [[\"path\", { \"d\": \"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z\" }], [\"path\", { \"d\": \"M14 2v4a2 2 0 0 0 2 2h4\" }]];\n/**\n * @component @name File\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTUgMkg2YTIgMiAwIDAgMC0yIDJ2MTZhMiAyIDAgMCAwIDIgMmgxMmEyIDIgMCAwIDAgMi0yVjdaIiAvPgogIDxwYXRoIGQ9Ik0xNCAydjRhMiAyIDAgMCAwIDIgMmg0IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/file\n * @see https://lucide.dev/guide/packages/lucide-svelte - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {FunctionalComponent} Svelte component\n *\n */\n</script>\n\n<Icon name=\"file\" {...$$props} iconNode={iconNode}>\n  <slot/>\n</Icon>\n","<script>/**\n * @license lucide-svelte v0.359.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\nimport Icon from '../Icon.svelte';\nconst iconNode = [[\"polygon\", { \"points\": \"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3\" }]];\n/**\n * @component @name Filter\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cG9seWdvbiBwb2ludHM9IjIyIDMgMiAzIDEwIDEyLjQ2IDEwIDE5IDE0IDIxIDE0IDEyLjQ2IDIyIDMiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/filter\n * @see https://lucide.dev/guide/packages/lucide-svelte - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {FunctionalComponent} Svelte component\n *\n */\n</script>\n\n<Icon name=\"filter\" {...$$props} iconNode={iconNode}>\n  <slot/>\n</Icon>\n","<script>/**\n * @license lucide-svelte v0.359.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\nimport Icon from '../Icon.svelte';\nconst iconNode = [[\"circle\", { \"cx\": \"11\", \"cy\": \"11\", \"r\": \"8\" }], [\"path\", { \"d\": \"m21 21-4.3-4.3\" }]];\n/**\n * @component @name Search\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8Y2lyY2xlIGN4PSIxMSIgY3k9IjExIiByPSI4IiAvPgogIDxwYXRoIGQ9Im0yMSAyMS00LjMtNC4zIiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/search\n * @see https://lucide.dev/guide/packages/lucide-svelte - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {FunctionalComponent} Svelte component\n *\n */\n</script>\n\n<Icon name=\"search\" {...$$props} iconNode={iconNode}>\n  <slot/>\n</Icon>\n","<script lang=\"ts\">\n  import { onMount } from 'svelte';\n  import { fade, slide } from 'svelte/transition';\n  import { \n    History, Search, Calendar, Filter, Building2, Map, \n    ClipboardCheck, ArrowRight, Star, ChevronDown, ChevronUp, \n    File, Shield, BadgeCheck, DollarSign, Truck, Users, Leaf, Plus\n  } from 'lucide-svelte';\n  import { supabase } from '$lib/supabase';\n  import { goto } from '$app/navigation';\n\n  // UI State\n  let loading = true;\n  let error: string | null = null;\n  let searchQuery = '';\n  let selectedTimeframe: 'all' | 'today' | 'week' | 'month' = 'all';\n  let selectedSite: string = '';\n  let selectedDepartment: string = '';\n  let selectedType: 'audit' | 'checkin' = 'audit';\n  let showFilters = false;\n  let expandedCardId: string | null = null;\n\n  // Data\n  let sites: Array<{ id: string; name: string }> = [];\n  let departments: Array<{ id: string; name: string; site_id: string }> = [];\n  let audits: Array<{\n    id: string;\n    title: string;\n    date: string;\n    site_name: string;\n    department_name: string;\n    score: number;\n    status: string;\n    details: any;\n  }> = [];\n  let checkins: Array<any> = [];\n\n  $: filteredDepartments = departments.filter(\n    dept => !selectedSite || dept.site_id === selectedSite\n  );\n\n  $: filteredItems = (selectedType === 'audit' ? audits : checkins)\n    .filter(item => {\n      // Filter by search query\n      if (searchQuery) {\n        const query = searchQuery.toLowerCase();\n        return (\n          item.title.toLowerCase().includes(query) ||\n          item.site_name.toLowerCase().includes(query) ||\n          item.department_name.toLowerCase().includes(query)\n        );\n      }\n      return true;\n    })\n    .filter(item => {\n      // Filter by timeframe\n      const itemDate = new Date(item.date);\n      const now = new Date();\n      \n      if (selectedTimeframe === 'today') {\n        return itemDate.toDateString() === now.toDateString();\n      } else if (selectedTimeframe === 'week') {\n        const oneWeekAgo = new Date();\n        oneWeekAgo.setDate(now.getDate() - 7);\n        return itemDate >= oneWeekAgo;\n      } else if (selectedTimeframe === 'month') {\n        const oneMonthAgo = new Date();\n        oneMonthAgo.setMonth(now.getMonth() - 1);\n        return itemDate >= oneMonthAgo;\n      }\n      return true;\n    })\n    .filter(item => {\n      // Filter by site\n      if (selectedSite) {\n        return item.details.site_id === selectedSite;\n      }\n      return true;\n    })\n    .filter(item => {\n      // Filter by department\n      if (selectedDepartment) {\n        return item.details.department_id === selectedDepartment;\n      }\n      return true;\n    })\n    .sort((a, b) => new Date(b.date).getTime() - new Date(a.date).getTime()); // Sort by date descending\n\n  onMount(async () => {\n    try {\n      // Get user's company\n      const { data: { user } } = await supabase.auth.getUser();\n      if (!user) throw new Error('Not authenticated');\n\n      const { data: profile } = await supabase\n        .from('profiles')\n        .select('company_id')\n        .eq('id', user.id)\n        .single();\n\n      if (!profile?.company_id) throw new Error('Company not found');\n\n      // Fetch sites and departments\n      const [{ data: sitesData }, { data: deptsData }, { data: checkinsData }] = await Promise.all([\n        supabase\n          .from('sites')\n          .select('*')\n          .eq('company_id', profile.company_id),\n        supabase\n          .from('departments')\n          .select('*')\n          .eq('company_id', profile.company_id),\n        supabase\n          .from('daily_checkins')\n          .select(`\n            id,\n            site_id,\n            department_id,\n            shift_date,\n            shift_type,\n            notes,\n            created_at,\n            created_by,\n            sites (name),\n            departments (name),\n            checkin_categories (\n              category,\n              status,\n              notes\n            ),\n            checkin_actions (\n              category,\n              description,\n              priority,\n              status\n            )\n          `)\n          .eq('company_id', profile.company_id)\n          .order('created_at', { ascending: false })\n      ]);\n\n      if (sitesData) sites = sitesData;\n      if (deptsData) departments = deptsData;\n      if (checkinsData) checkins = checkinsData;\n\n      // Fetch audit history\n      const { data: auditData, error: auditError } = await supabase\n        .from('audit_history')\n        .select(`\n          audit_id,\n          company_id,\n          created_at,\n          data,\n          full_name,\n          email,\n          site_id,\n          department_id,\n          audit_type,\n          site_name,\n          department_name\n        `)\n        .eq('company_id', profile.company_id)\n        .order('created_at', { ascending: false });\n\n      if (auditError) throw auditError;\n\n      // Process audit data\n      audits = (auditData || []).map(audit => ({\n        id: audit.audit_id,\n        title: `${audit.audit_type.toUpperCase()} Audit`,\n        date: audit.created_at,\n        site_name: audit.site_name || 'Unknown Site',\n        department_name: audit.department_name || 'Unknown Department',\n        score: audit.data.score || 0,\n        status: 'completed',\n        details: {\n          ...audit,\n          type: 'audit'\n        }\n      }));\n\n    } catch (e) {\n      console.error('Error loading history:', e);\n      error = e instanceof Error ? e.message : 'Failed to load history';\n    } finally {\n      loading = false;\n    }\n  });\n\n  function formatDate(dateString: string): string {\n    return new Date(dateString).toLocaleString('en-US', {\n      year: 'numeric',\n      month: 'short',\n      day: 'numeric',\n      hour: '2-digit',\n      minute: '2-digit'\n    });\n  }\n\n  function toggleCardDetails(id: string) {\n    expandedCardId = expandedCardId === id ? null : id;\n  }\n\n  function getScoreColor(score: number): string {\n    if (score >= 4) return 'text-green-500';\n    if (score >= 3) return 'text-yellow-500';\n    return 'text-red-500';\n  }\n\n  function getStatusColor(status: 'green' | 'yellow' | 'red'): string {\n    switch (status) {\n      case 'green': return 'bg-green-100 text-green-800';\n      case 'yellow': return 'bg-yellow-100 text-yellow-800';\n      case 'red': return 'bg-red-100 text-red-800';\n      default: return 'bg-gray-100 text-gray-800';\n    }\n  }\n\n  function getCategoryIcon(category: string) {\n    switch (category) {\n      case 'safety': return Shield;\n      case 'quality': return BadgeCheck;\n      case 'cost': return DollarSign;\n      case 'delivery': return Truck;\n      case 'people': return Users;\n      case 'environment': return Leaf;\n      case 'plus': return Plus;\n      default: return ClipboardCheck;\n    }\n  }\n\n  function handleViewDetails(item: any) {\n    if (selectedType === 'audit') {\n      localStorage.setItem('currentAuditData', JSON.stringify(item));\n      goto('/audit/detail');\n    }\n  }\n</script>\n\n<div class=\"min-h-screen bg-gradient-to-br from-blue-50 to-purple-50 py-12 px-6\">\n  <div class=\"max-w-6xl mx-auto space-y-8\">\n    <!-- Header -->\n    <div class=\"flex items-center justify-between\">\n      <div class=\"flex items-center space-x-3\">\n        <div class=\"w-10 h-10 rounded-full bg-indigo-500 flex items-center justify-center text-white\">\n          <History class=\"w-6 h-6\" />\n        </div>\n        <div>\n          <h1 class=\"text-2xl font-light text-gray-900\">Activity History</h1>\n          <p class=\"text-gray-500\">View past audits and meetings</p>\n        </div>\n      </div>\n      <a\n        href=\"/dashboard\"\n        class=\"px-4 py-2 bg-white border border-gray-200 rounded-lg shadow-sm hover:bg-gray-50 \n               transition-colors flex items-center space-x-2 text-gray-700\"\n      >\n        <span>Back to Dashboard</span>\n        <ArrowRight class=\"w-4 h-4 transform rotate-180\" />\n      </a>\n    </div>\n\n    <!-- Type Selection -->\n    <div class=\"flex space-x-4 mb-6\">\n      <button\n        class=\"px-4 py-2 rounded-lg transition-colors {selectedType === 'audit' ? 'bg-blue-500 text-white' : 'bg-gray-100 text-gray-600 hover:bg-gray-200'}\"\n        on:click={() => selectedType = 'audit'}\n      >\n        <div class=\"flex items-center space-x-2\">\n          <ClipboardCheck class=\"w-5 h-5\" />\n          <span>Audits</span>\n        </div>\n      </button>\n      \n      <button\n        class=\"px-4 py-2 rounded-lg transition-colors {selectedType === 'checkin' ? 'bg-blue-500 text-white' : 'bg-gray-100 text-gray-600 hover:bg-gray-200'}\"\n        on:click={() => selectedType = 'checkin'}\n      >\n        <div class=\"flex items-center space-x-2\">\n          <Plus class=\"w-5 h-5\" />\n          <span>SQCDPE+</span>\n        </div>\n      </button>\n    </div>\n\n    <!-- Filters -->\n    <div class=\"bg-white rounded-xl p-6 shadow-lg space-y-6\">\n      <!-- Search and Type Filters -->\n      <div class=\"flex flex-col md:flex-row space-y-4 md:space-y-0 md:space-x-4\">\n        <!-- Search -->\n        <div class=\"flex-1 relative\">\n          <div class=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\n            <Search class=\"h-5 w-5 text-gray-400\" />\n          </div>\n          <input\n            type=\"text\"\n            bind:value={searchQuery}\n            class=\"block w-full pl-10 px-4 py-2 rounded-lg bg-gray-50 border-gray-200\n                   focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500\"\n            placeholder=\"Search history...\"\n          />\n        </div>\n\n        <!-- Time Filter -->\n        <div>\n          <select\n            bind:value={selectedTimeframe}\n            class=\"w-full md:w-40 px-4 py-2 rounded-lg bg-gray-50 border-gray-200\n                   focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500\"\n          >\n            <option value=\"all\">All Time</option>\n            <option value=\"today\">Today</option>\n            <option value=\"week\">Last 7 Days</option>\n            <option value=\"month\">Last 30 Days</option>\n          </select>\n        </div>\n\n        <!-- Filter Button -->\n        <button\n          class=\"flex items-center justify-center space-x-2 px-4 py-2 bg-indigo-100 text-indigo-600 \n                 rounded-lg hover:bg-indigo-200 transition-colors\"\n          on:click={() => showFilters = !showFilters}\n        >\n          <Filter class=\"w-5 h-5\" />\n          <span>More Filters</span>\n          <svelte:component \n            this={showFilters ? ChevronUp : ChevronDown}\n            class=\"w-4 h-4\"\n          />\n        </button>\n      </div>\n\n      <!-- Advanced Filters -->\n      {#if showFilters}\n        <div \n          class=\"grid grid-cols-1 md:grid-cols-2 gap-6\"\n          transition:slide={{ duration: 200 }}\n        >\n          <!-- Site Selection -->\n          <div class=\"space-y-2\">\n            <label class=\"flex items-center space-x-2 text-sm font-medium text-gray-700\">\n              <Map class=\"w-4 h-4\" />\n              <span>Site</span>\n            </label>\n            <select\n              bind:value={selectedSite}\n              class=\"w-full px-4 py-2 rounded-lg bg-gray-50 border-gray-200\n                     focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500\"\n            >\n              <option value=\"\">All Sites</option>\n              {#each sites as site}\n                <option value={site.id}>{site.name}</option>\n              {/each}\n            </select>\n          </div>\n\n          <!-- Department Selection -->\n          <div class=\"space-y-2\">\n            <label class=\"flex items-center space-x-2 text-sm font-medium text-gray-700\">\n              <Building2 class=\"w-4 h-4\" />\n              <span>Department</span>\n            </label>\n            <select\n              bind:value={selectedDepartment}\n              disabled={!selectedSite}\n              class=\"w-full px-4 py-2 rounded-lg bg-gray-50 border-gray-200\n                     focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500\n                     disabled:opacity-50 disabled:cursor-not-allowed\"\n            >\n              <option value=\"\">All Departments</option>\n              {#each filteredDepartments as department}\n                <option value={department.id}>{department.name}</option>\n              {/each}\n            </select>\n          </div>\n        </div>\n      {/if}\n    </div>\n\n    <!-- Content -->\n    {#if loading}\n      <div class=\"flex justify-center py-12\">\n        <div class=\"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-indigo-500\"></div>\n      </div>\n    {:else if error}\n      <div class=\"bg-red-50 text-red-600 rounded-xl p-4\">\n        {error}\n      </div>\n    {:else if filteredItems.length === 0}\n      <div class=\"bg-white rounded-xl shadow-lg p-8 text-center\">\n        <div class=\"w-16 h-16 rounded-full bg-gray-100 flex items-center justify-center mx-auto mb-4\">\n          <File class=\"w-8 h-8 text-gray-400\" />\n        </div>\n        <h3 class=\"text-lg font-medium text-gray-900 mb-2\">\n          No {selectedType === 'audit' ? 'audit' : 'SQCDPE+'} history found\n        </h3>\n        <p class=\"text-gray-500\">Try adjusting your filters or search criteria</p>\n      </div>\n    {:else}\n      <div class=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n        {#each filteredItems as item (item.id)}\n          <div \n            class=\"bg-white rounded-xl shadow-lg overflow-hidden transition-all duration-300\"\n            transition:fade={{ duration: 200 }}\n          >\n            <!-- Card Header -->\n            <div class=\"p-6 border-b border-gray-100\">\n              <div class=\"flex items-start justify-between\">\n                <div class=\"flex items-start space-x-3\">\n                  <div class=\"p-2 rounded-lg bg-blue-100 flex-shrink-0\">\n                    {#if selectedType === 'audit'}\n                      <ClipboardCheck class=\"w-5 h-5 text-blue-600\" />\n                    {:else}\n                      <Plus class=\"w-5 h-5 text-blue-600\" />\n                    {/if}\n                  </div>\n                  <div>\n                    <h3 class=\"font-medium text-gray-900 line-clamp-1\">\n                      {selectedType === 'audit' ? item.title : `${item.shift_type} Shift Check-in`}\n                    </h3>\n                    <p class=\"text-sm text-gray-500\">\n                      {formatDate(selectedType === 'audit' ? item.date : item.created_at)}\n                    </p>\n                  </div>\n                </div>\n                \n                <div \n                  class=\"px-2 py-1 rounded-full text-xs font-medium \n                         bg-green-100 text-green-800\"\n                >\n                  {selectedType === 'audit' ? item.status : item.shift_type}\n                </div>\n              </div>\n            </div>\n            \n            <!-- Card Content -->\n            <div class=\"p-6 space-y-4\">\n              <div class=\"flex items-center justify-between\">\n                <div class=\"flex items-center space-x-2 text-sm text-gray-500\">\n                  <Map class=\"w-4 h-4\" />\n                  <span>\n                    {selectedType === 'audit' ? item.site_name : item.sites.name}\n                  </span>\n                </div>\n                \n                {#if selectedType === 'audit'}\n                  <div class=\"flex items-center space-x-1\">\n                    <Star class={`w-4 h-4 ${getScoreColor(item.score || 0)}`} />\n                    <span class={`text-lg ${getScoreColor(item.score || 0)}`}>\n                      {item.score ? item.score.toFixed(1) : 'N/A'}\n                    </span>\n                  </div>\n                {/if}\n              </div>\n              \n              <div class=\"text-sm text-gray-500\">\n                <div class=\"flex items-center space-x-2\">\n                  <Building2 class=\"w-4 h-4\" />\n                  <span>\n                    {selectedType === 'audit' ? item.department_name : item.departments.name}\n                  </span>\n                </div>\n              </div>\n              \n              {#if selectedType === 'checkin' && item.checkin_categories}\n                <div class=\"border-t border-gray-100 pt-4 space-y-2\">\n                  <div class=\"grid grid-cols-2 gap-2\">\n                    {#each item.checkin_categories as category}\n                      <div class=\"flex items-center space-x-2\">\n                        <svelte:component this={getCategoryIcon(category.category)} class=\"w-4 h-4 text-gray-600\" />\n                        <span class={`px-2 py-0.5 rounded-full text-xs font-medium ${getStatusColor(category.status)}`}>\n                          {category.status}\n                        </span>\n                      </div>\n                    {/each}\n                  </div>\n                </div>\n              {/if}\n              \n              <!-- Expandable Details Section -->\n              {#if expandedCardId === item.id}\n                <div transition:slide={{ duration: 200 }} class=\"mt-4 pt-4 border-t border-gray-100 space-y-3\">\n                  <h4 class=\"font-medium text-gray-800\">Details</h4>\n                  <div class=\"space-y-2\">\n                    {#if selectedType === 'audit'}\n                      <p class=\"text-sm text-gray-600\">\n                        <span class=\"font-medium\">Audit Type:</span> {item.details.audit_type}\n                      </p>\n                      <p class=\"text-sm text-gray-600\">\n                        <span class=\"font-medium\">Created By:</span> {item.details.full_name || item.details.email}\n                      </p>\n                      <p class=\"text-sm text-gray-600\">\n                        <span class=\"font-medium\">Critical Issues:</span> {item.details.data.critical_issues || 0}\n                      </p>\n                    {:else}\n                      {#if item.notes}\n                        <p class=\"text-sm text-gray-600\">\n                          <span class=\"font-medium\">Notes:</span> {item.notes}\n                        </p>\n                      {/if}\n                      {#if item.checkin_actions?.length}\n                        <div class=\"mt-4\">\n                          <h5 class=\"text-sm font-medium text-gray-700 mb-2\">Action Items</h5>\n                          <div class=\"space-y-2\">\n                            {#each item.checkin_actions as action}\n                              <div class=\"bg-gray-50 p-2 rounded-lg\">\n                                <p class=\"text-sm text-gray-600\">{action.description}</p>\n                                <div class=\"flex items-center space-x-2 mt-1\">\n                                  <span class=\"text-xs font-medium text-gray-500\">{action.category}</span>\n                                  <span class=\"text-xs px-2 py-0.5 rounded-full bg-blue-100 text-blue-800\">{action.status}</span>\n                                </div>\n                              </div>\n                            {/each}\n                          </div>\n                        </div>\n                      {/if}\n                    {/if}\n                  </div>\n                </div>\n              {/if}\n              \n              <!-- Action Buttons -->\n              <div class=\"flex justify-between pt-2\">\n                <button\n                  class=\"text-indigo-600 hover:text-indigo-800 text-sm font-medium flex items-center space-x-1\"\n                  on:click={() => toggleCardDetails(item.id)}\n                >\n                  <svelte:component \n                    this={expandedCardId === item.id ? ChevronUp : ChevronDown}\n                    class=\"w-4 h-4\"\n                  />\n                  <span>{expandedCardId === item.id ? 'Less Details' : 'More Details'}</span>\n                </button>\n                \n                {#if selectedType === 'audit'}\n                  <button\n                    class=\"flex items-center space-x-1 px-3 py-1 bg-indigo-100 text-indigo-600 rounded-lg hover:bg-indigo-200 transition-colors text-sm\"\n                    on:click={() => handleViewDetails(item.details)}\n                  >\n                    <span>View Full Details</span>\n                    <ArrowRight class=\"w-4 h-4\" />\n                  </button>\n                {/if}\n              </div>\n            </div>\n          </div>\n        {/each}\n      </div>\n    {/if}\n  </div>\n</div>"],"names":["$.mutable_source","$.set","$.get","BadgeCheck","DollarSign","ClipboardCheck","ChevronUp","ChevronDown","$$anchor","$.each","$.set_text","$.bind_select_value","$.transition","$.template_effect","$.derived_safe_equal","$.index","$.component","$.set_class","$.event","$.bind_value"],"mappings":"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","x_google_ignoreList":[0,1,2]}